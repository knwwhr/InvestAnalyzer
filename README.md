# 🤖 AI Stock Screener - 거래량 기반 종목 추천 시스템

**AI가 전 종목을 자동 스크리닝하여 매일 TOP 10 종목을 추천합니다**

한국 주식시장 전체 종목을 자동으로 분석하고, 창의적인 거래량 지표를 통해 매매 타이밍이 좋은 종목을 추천하는 AI 시스템입니다.

---

## 🎯 핵심 기능

### 1. 자동 전체 종목 스크리닝
- 코스피/코스닥 **150+ 종목** 자동 스캔
- 매일 자동으로 전체 분석 (1시간 캐싱)
- 종목당 30일 데이터 기반 분석

### 2. 창의적인 거래량 지표 (4종)
#### 🐋 **고래 감지 (Whale Detection)**
- 평균의 2.5배 이상 거래량 + 급격한 가격 변동
- 기관/외국인 등 큰 손의 매매 패턴 포착
- 매수 고래 vs 매도 고래 구분

#### 🤫 **조용한 매집 (Silent Accumulation)**
- 가격 횡보 (변동성 3% 미만)
- 거래량 꾸준히 증가 (20% 이상)
- 큰 손들의 물량 모으기 감지

#### 🚀 **탈출 속도 (Escape Velocity)**
- 20일 저항선 돌파
- 거래량 2배 이상 폭발
- 모멘텀 시작 시점 포착

#### 💧 **유동성 고갈 (Liquidity Drain)**
- 거래량 30% 이상 감소
- 변동성 20% 이상 축소
- 큰 움직임 직전 신호 (스프링 압축)

### 3. 점수화 및 추천 시스템
- **S등급 (80점+)**: 🔥 최우선 매수
- **A등급 (65점+)**: 🟢 적극 매수
- **B등급 (50점+)**: 🟡 매수 고려
- **C등급 (35점+)**: ⚪ 주목
- **D등급 (35점-)**: ⚫ 관망

점수 계산:
- 창의적 지표 (60%)
- MFI 지표 (20%)
- 거래량 급증 (20%)

### 4. 카테고리별 필터링
- 🏆 종합 TOP 10
- 🐋 고래 감지
- 🤫 조용한 매집
- 🚀 탈출 속도
- 💧 유동성 고갈
- 🔥 거래량 폭발

### 5. 종목 상세 분석
- 종합 평가 점수
- 4가지 창의적 지표 상세
- 거래량 지표 (OBV, MFI, VWAP, 비대칭 비율)
- 감지된 신호 요약

---

## 🛠️ 기술 스택

### 백엔드
- **Node.js + Express**: REST API 서버
- **한국투자증권 OpenAPI**: 실시간 주가/거래량 데이터
- **창의적 알고리즘**: 4종의 독자 개발 지표
- **Axios**: HTTP 클라이언트
- **캐싱 시스템**: 1시간 자동 캐싱 (API 호출 최적화)

### 프론트엔드
- **React 18 (CDN)**: SPA 프레임워크
- **Tailwind CSS**: 모던 UI 디자인
- **반응형 디자인**: 모바일/태블릿/데스크톱 지원

---

## 📦 설치 및 실행

### 1. 한국투자증권 API 키 발급 (필수)
1. https://apiportal.koreainvestment.com/ 접속
2. 회원가입 및 로그인
3. "KIS Developers" → "App 등록"
4. APP KEY, APP SECRET 발급 (실전투자 또는 모의투자)

### 2. 백엔드 설정
```bash
cd ~/stock-volume-analyzer/backend

# 의존성 설치
npm install

# 환경변수 설정
cp .env.example .env

# .env 파일 편집
nano .env
```

`.env` 파일 내용:
```env
KIS_APP_KEY=발급받은_앱키
KIS_APP_SECRET=발급받은_시크릿키
PORT=3001
NODE_ENV=development
```

### 3. 서버 실행
```bash
npm start
```

서버 실행 확인:
```
🚀 Stock Volume Analyzer 백엔드 서버 시작
📡 포트: 3001
🌐 API 엔드포인트: http://localhost:3001/api
```

### 4. 프론트엔드 실행
**새 터미널 창**을 열고:

```bash
cd ~/stock-volume-analyzer/frontend
python3 -m http.server 8000
```

브라우저에서 접속:
```
http://localhost:8000
```

---

## 🚀 사용 방법

### 1. 자동 추천 보기
- 페이지 로드 시 자동으로 TOP 10 추천
- "🔄 새로고침" 버튼으로 수동 업데이트

### 2. 카테고리별 필터링
- 원하는 카테고리 버튼 클릭
- 해당 조건에 맞는 종목만 표시

### 3. 종목 상세 분석
- 추천 종목 카드 클릭
- 모달 창에서 상세 분석 확인:
  - 종합 점수 및 등급
  - 4가지 창의적 지표 상세
  - 거래량 지표 수치
  - 감지된 모든 신호

### 4. 투자 의사결정
```
1. S/A등급 종목 집중 검토
2. 창의적 지표에서 여러 신호 감지 → 우선순위
3. MFI 과매도 (20 이하) → 매수 타이밍
4. 거래량 급증 + 고래 감지 → 주목
5. 유동성 고갈 감지 → 폭발 대기
```

---

## 📊 API 엔드포인트

### 추천/스크리닝 API
```bash
# TOP 10 추천 종목
GET /api/screening/recommend?market=ALL&limit=10

# 카테고리별 추천
GET /api/screening/category/whale
GET /api/screening/category/accumulation
GET /api/screening/category/escape
GET /api/screening/category/drain
GET /api/screening/category/volume-surge

# 단일 종목 상세 분석
GET /api/stock/:code/advanced-analysis

# 캐시 초기화
POST /api/screening/clear-cache
```

### 기본 데이터 API
```bash
# 현재가 조회
GET /api/stock/:code/current

# 일봉 데이터
GET /api/stock/:code/daily?days=30

# 거래량 분석
GET /api/stock/:code/volume-analysis
```

---

## 🧮 점수 계산 로직

### 1. 창의적 지표 점수 (60점)
- 고래 감지: 최대 25점
- 조용한 매집: 최대 25점
- 탈출 속도: 최대 30점
- 유동성 고갈: 최대 10점

### 2. MFI 점수 (20점)
- MFI ≤ 30: +20점 (과매도)
- MFI ≥ 70: -10점 (과매수)

### 3. 거래량 급증 점수 (20점)
- 평균 대비 3배 이상: +20점
- 평균 대비 2배 이상: +10점

**총점**: 0-100점 (최소 30점 이상만 추천)

---

## ⚙️ 시스템 최적화

### 캐싱 시스템
- 스크리닝 결과 1시간 캐싱
- API 호출 제한 준수 (초당 5건 → 200ms 간격)
- 중복 분석 방지

### 성능
- 전체 종목 스크리닝: **약 5-10분** (150개 종목 기준)
- 캐시 히트 시: **즉시** 응답
- 단일 종목 분석: **1-2초**

---

## ⚠️ 주의사항

### 1. API 호출 제한
- 한국투자증권 API: **초당 최대 5건**
- 시스템이 자동으로 200ms 간격 조절
- 과도한 호출 시 일시적 차단 가능

### 2. 시장 운영 시간
- 장 운영: 평일 09:00 ~ 15:30
- 장 마감 후: 당일 종가 데이터 제공
- 주말/공휴일: 전 영업일 데이터

### 3. 투자 책임
```
⚠️ 중요: 본 시스템은 참고 도구일 뿐입니다
- 투자 판단은 본인의 책임
- 과거 데이터 기반 분석 (미래 수익 보장 X)
- 손실 가능성 충분히 인지
- 전문가 상담 병행 권장
```

### 4. 보안
- `.env` 파일 절대 공개 금지
- API 키 유출 시 즉시 재발급
- GitHub에 푸시 전 `.gitignore` 확인

---

## 🎓 지표 해석 가이드

### 고래 감지
```
✅ 매수 고래: 큰 손의 대량 매수 → 상승 기대
❌ 매도 고래: 큰 손의 대량 매도 → 하락 경계
```

### 조용한 매집
```
✅ 감지됨: 가격 안정 + 거래량 증가 → 상승 준비
📊 거래량 증가율 30%+ → 강력한 신호
```

### 탈출 속도
```
✅ 달성: 저항선 돌파 + 거래량 폭발 → 모멘텀 시작
🚀 모멘텀 점수 높을수록 강력한 상승
```

### 유동성 고갈
```
✅ 고갈: 거래량↓ + 변동성↓ → 폭발 대기
💡 긴장된 스프링 (압축 후 튀어오름)
```

---

## 📈 실전 활용 전략

### 전략 1: S등급 집중
```
1. S등급(80점+) 종목만 검토
2. 여러 창의적 지표 동시 감지 → 최우선
3. MFI 과매도 + 고래 감지 → 강력 매수
```

### 전략 2: 카테고리 조합
```
1. 조용한 매집 + 유동성 고갈 → 폭발 직전
2. 탈출 속도 + 고래 감지 → 모멘텀 확인
3. 거래량 폭발 + MFI 과매도 → 바닥 반등
```

### 전략 3: 분산 투자
```
1. TOP 10 중 5-7개 종목 선택
2. S/A등급 비중 확대
3. 서로 다른 카테고리 조합
```

---

## 🔮 향후 개발 계획

### Phase 1 (완료)
- ✅ 전체 종목 자동 스크리닝
- ✅ 4가지 창의적 지표 구현
- ✅ 점수화 및 추천 시스템
- ✅ 카테고리별 필터링
- ✅ 반응형 웹 UI

### Phase 2 (예정)
- [ ] 미국 주식 지원 (Alpha Vantage API)
- [ ] 일일 자동 실행 스케줄러 (cron)
- [ ] 브라우저 푸시 알림
- [ ] 추천 종목 이메일/카카오톡 전송
- [ ] 백테스팅 (과거 추천 성과 검증)

### Phase 3 (구상)
- [ ] 사용자 포트폴리오 관리
- [ ] AI 챗봇 (질문 답변)
- [ ] 모바일 앱 (React Native)
- [ ] 실시간 WebSocket 연동
- [ ] 수익률 추적 및 통계

---

## 🗂️ 프로젝트 구조

```
stock-volume-analyzer/
├── backend/
│   ├── server.js                 # Express 서버
│   ├── kisApi.js                 # 한투 API 클라이언트
│   ├── volumeIndicators.js       # 기본 거래량 지표
│   ├── advancedIndicators.js     # 창의적 지표 (4종)
│   ├── screening.js              # 스크리닝 엔진
│   ├── package.json
│   ├── .env.example
│   └── .env                      # API 키 (gitignore)
├── frontend/
│   └── index.html                # React SPA
├── README.md
└── .gitignore
```

---

## 💡 FAQ

**Q: 전체 스크리닝이 너무 오래 걸려요**
A: 첫 실행 시 5-10분 소요됩니다. 이후 1시간 동안은 캐시된 결과를 즉시 제공합니다.

**Q: API 키 발급이 어려워요**
A: 한국투자증권 사이트에서 "모의투자" 계좌로 발급받으면 무료로 사용 가능합니다.

**Q: 추천 종목이 실제로 수익이 나나요?**
A: 과거 데이터 기반 분석이므로 미래 수익을 보장하지 않습니다. 참고 도구로만 활용하세요.

**Q: 실시간 매매까지 자동화할 수 있나요?**
A: 가능하지만 매우 위험합니다. 신호 제공만 받고 직접 매매하는 것을 강력히 권장합니다.

**Q: 코스피/코스닥 전체 2500개 종목을 다 분석할 수 있나요?**
A: 가능하지만 API 호출 제한으로 인해 1-2시간 소요됩니다. 현재는 시가총액 상위 150개만 분석합니다.

---

## 🤝 기여

버그 리포트, 기능 제안, Pull Request 환영합니다!

**개선 아이디어**:
- 새로운 창의적 지표 제안
- UI/UX 개선
- 성능 최적화
- 문서 보완

---

## 📄 라이선스

MIT License

---

## 📞 지원

- 프로젝트 Issue 등록
- 코드 리뷰 요청
- 기능 개선 제안

---

**⚡ AI가 찾아주는 숨은 보석 종목, 지금 바로 시작하세요! ⚡**

```bash
cd ~/stock-volume-analyzer/backend
npm start

# 새 터미널
cd ~/stock-volume-analyzer/frontend
python3 -m http.server 8000
```

**브라우저에서 http://localhost:8000 접속!**
